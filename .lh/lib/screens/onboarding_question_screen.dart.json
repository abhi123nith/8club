{
    "sourceFile": "lib/screens/onboarding_question_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1762436561377,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1762457559626,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,13 +1,13 @@\n+import 'dart:async';\n import 'dart:io';\n import 'dart:math';\n-\n+import 'package:camera/camera.dart';\n import 'package:flutter/material.dart';\n import 'package:flutter_sound/flutter_sound.dart';\n import 'package:path_provider/path_provider.dart';\n import 'package:permission_handler/permission_handler.dart';\n-import 'package:hotspots_hostes/constants/text_constants.dart';\n-import 'package:hotspots_hostes/constants/text_styles.dart';\n+import 'package:video_player/video_player.dart';\n \n class OnboardingQuestionScreen extends StatefulWidget {\n   final List<int> selectedExperienceIds;\n   final String experienceDescription;\n@@ -24,479 +24,472 @@\n }\n \n class _OnboardingQuestionScreenState extends State<OnboardingQuestionScreen>\n     with TickerProviderStateMixin {\n-  final TextEditingController _questionController = TextEditingController();\n-  String? _recordedAudioPath;\n-  String? _recordedVideoPath;\n+  final TextEditingController _controller = TextEditingController();\n+  final FlutterSoundRecorder _recorder = FlutterSoundRecorder();\n+  final FlutterSoundPlayer _player = FlutterSoundPlayer();\n+\n+  CameraController? _cameraController;\n+  VideoPlayerController? _videoPlayerController;\n+\n   bool _isRecordingAudio = false;\n   bool _isRecordingVideo = false;\n+  bool _isPlayingAudio = false;\n \n-  late FlutterSoundRecorder _audioRecorder;\n-  late AnimationController _buttonAnimationController;\n+  String? _recordedAudioPath;\n+  String? _recordedVideoPath;\n \n-  // For audio waveform visualization\n-  List<double> _audioWaveform = [];\n-  late AnimationController _waveformAnimationController;\n+  List<double> _waveform = [];\n+  late AnimationController _micPulseController;\n+  late AnimationController _fadeController;\n+  late Animation<double> _fadeAnimation;\n \n+  Duration _recordingDuration = Duration.zero;\n+  Timer? _recordingTimer;\n+\n   @override\n   void initState() {\n     super.initState();\n-    _audioRecorder = FlutterSoundRecorder();\n-    _buttonAnimationController = AnimationController(\n-      duration: const Duration(milliseconds: 300),\n-      vsync: this,\n-    );\n+    _initRecorder();\n+    _initPlayer();\n+    _initCamera();\n \n-    _waveformAnimationController = AnimationController(\n-      duration: const Duration(milliseconds: 1000),\n+    _micPulseController = AnimationController(\n       vsync: this,\n-    )..repeat();\n+      duration: const Duration(seconds: 1),\n+      lowerBound: 0.8,\n+      upperBound: 1.2,\n+    )..repeat(reverse: true);\n \n-    // Initialize the audio recorder\n-    _audioRecorder.openRecorder();\n+    _fadeController =\n+        AnimationController(vsync: this, duration: const Duration(milliseconds: 500));\n+    _fadeAnimation = CurvedAnimation(parent: _fadeController, curve: Curves.easeInOut);\n+    _fadeController.forward();\n   }\n \n-  void _startAudioRecording() async {\n-    // Check and request permission\n-    if (await Permission.microphone.request().isGranted) {\n-      setState(() {\n-        _isRecordingAudio = true;\n-        _audioWaveform = List.generate(50, (index) => 0.0);\n-      });\n+  Future<void> _initRecorder() async {\n+    await _recorder.openRecorder();\n+    await Permission.microphone.request();\n+  }\n \n-      // Animate button width\n-      _buttonAnimationController.forward();\n+  Future<void> _initPlayer() async {\n+    await _player.openPlayer();\n+  }\n \n-      // Start recording\n-      final directory = await getApplicationDocumentsDirectory();\n-      final filePath =\n-          '${directory.path}/recording_${DateTime.now().millisecondsSinceEpoch}.aac';\n-\n-      await _audioRecorder.startRecorder(toFile: filePath);\n-\n-      // Simulate waveform updates\n-      _simulateWaveform();\n+  Future<void> _initCamera() async {\n+    final cameras = await availableCameras();\n+    if (cameras.isNotEmpty) {\n+      _cameraController = CameraController(cameras.first, ResolutionPreset.medium);\n+      await _cameraController?.initialize();\n+      setState(() {});\n     }\n   }\n \n   void _simulateWaveform() {\n     if (!_isRecordingAudio) return;\n-\n-    // Generate random waveform data\n-    List<double> newWaveform = List.generate(\n-      50,\n-      (index) => Random().nextDouble() * 100,\n-    );\n-\n     setState(() {\n-      _audioWaveform = newWaveform;\n+      _waveform = List.generate(40, (index) => Random().nextDouble() * 70);\n     });\n-\n-    // Continue simulation\n     Future.delayed(const Duration(milliseconds: 100), _simulateWaveform);\n   }\n \n-  void _stopAudioRecording() async {\n-    await _audioRecorder.stopRecorder();\n-    final directory = await getApplicationDocumentsDirectory();\n-    final filePath =\n-        '${directory.path}/recording_${DateTime.now().millisecondsSinceEpoch}.aac';\n-\n-    setState(() {\n-      _isRecordingAudio = false;\n-      _recordedAudioPath = filePath;\n-      _audioWaveform = [];\n+  void _startTimer() {\n+    _recordingDuration = Duration.zero;\n+    _recordingTimer?.cancel();\n+    _recordingTimer = Timer.periodic(const Duration(seconds: 1), (_) {\n+      setState(() => _recordingDuration += const Duration(seconds: 1));\n     });\n+  }\n \n-    // Reset button animation\n-    _buttonAnimationController.reverse();\n+  void _stopTimer() {\n+    _recordingTimer?.cancel();\n   }\n \n-  void _deleteAudioRecording() {\n-    if (_recordedAudioPath != null) {\n-      File(_recordedAudioPath!).delete();\n-    }\n-    setState(() {\n-      _recordedAudioPath = null;\n-    });\n+  String _formatDuration(Duration d) {\n+    final m = d.inMinutes.remainder(60).toString().padLeft(2, '0');\n+    final s = d.inSeconds.remainder(60).toString().padLeft(2, '0');\n+    return \"$m:$s\";\n   }\n \n-  void _startVideoRecording() async {\n-    // Check and request permission\n-    if (await Permission.camera.request().isGranted) {\n+  Future<void> _startAudioRecording() async {\n+    if (await Permission.microphone.isGranted) {\n+      final dir = await getApplicationDocumentsDirectory();\n+      final path = '${dir.path}/recording_${DateTime.now().millisecondsSinceEpoch}.aac';\n+      await _recorder.startRecorder(toFile: path);\n       setState(() {\n-        _isRecordingVideo = true;\n+        _recordedAudioPath = path;\n+        _isRecordingAudio = true;\n       });\n+      _simulateWaveform();\n+      _startTimer();\n+    }\n+  }\n \n-      // Animate button width\n-      _buttonAnimationController.forward();\n+  Future<void> _stopAudioRecording() async {\n+    await _recorder.stopRecorder();\n+    _stopTimer();\n+    setState(() => _isRecordingAudio = false);\n+  }\n \n-      // Start recording (simplified for this example)\n-      // In a real app, you would use the camera package to record video\n-      Future.delayed(const Duration(seconds: 5), () {\n-        _stopVideoRecording();\n-      });\n+  Future<void> _startVideoRecording() async {\n+    if (await Permission.camera.isGranted) {\n+      await _cameraController?.startVideoRecording();\n+      _startTimer();\n+      setState(() => _isRecordingVideo = true);\n     }\n   }\n \n-  void _stopVideoRecording() {\n-    setState(() {\n-      _isRecordingVideo = false;\n-      _recordedVideoPath = 'video_path_placeholder';\n-    });\n+  Future<void> _stopVideoRecording() async {\n+    final result = await _cameraController?.stopVideoRecording();\n+    _stopTimer();\n+    if (result != null) {\n+      _recordedVideoPath = result.path;\n+      _videoPlayerController = VideoPlayerController.file(File(result.path))\n+        ..initialize().then((_) => setState(() {}));\n+    }\n+    setState(() => _isRecordingVideo = false);\n+  }\n \n-    // Reset button animation\n-    _buttonAnimationController.reverse();\n+  void _deleteAudio() {\n+    if (_recordedAudioPath != null) File(_recordedAudioPath!).delete();\n+    setState(() => _recordedAudioPath = null);\n   }\n \n-  void _deleteVideoRecording() {\n-    if (_recordedVideoPath != null &&\n-        _recordedVideoPath != 'video_path_placeholder') {\n-      File(_recordedVideoPath!).delete();\n-    }\n+  void _deleteVideo() {\n+    if (_recordedVideoPath != null) File(_recordedVideoPath!).delete();\n     setState(() {\n       _recordedVideoPath = null;\n+      _videoPlayerController = null;\n     });\n   }\n \n-  void _submitQuestionnaire() {\n-    // Log the state\n-    print('Selected Experience IDs: ${widget.selectedExperienceIds}');\n-    print('Experience Description: ${widget.experienceDescription}');\n-    print('Question Response: ${_questionController.text}');\n-    print('Recorded Audio Path: $_recordedAudioPath');\n-    print('Recorded Video Path: $_recordedVideoPath');\n-\n-    // Show success message\n-    ScaffoldMessenger.of(context).showSnackBar(\n-      const SnackBar(\n-        content: Text('Questionnaire submitted successfully!'),\n-        backgroundColor: Color(0xFF5961FF), // secondaryAccent\n-      ),\n-    );\n-  }\n-\n-  // Widget to display audio waveform\n-  Widget _buildAudioWaveform() {\n-    if (_audioWaveform.isEmpty) return const SizedBox.shrink();\n-\n-    return Container(\n-      height: 100,\n-      padding: const EdgeInsets.all(16),\n-      decoration: BoxDecoration(\n-        color: const Color(0xFF151515), // base2\n-        borderRadius: BorderRadius.circular(8),\n-      ),\n-      child: Row(\n-        mainAxisAlignment: MainAxisAlignment.spaceEvenly,\n-        children: _audioWaveform.map((amplitude) {\n-          return Container(\n-            width: 4,\n-            height: max(2, amplitude),\n-            decoration: BoxDecoration(\n-              color: const Color(0xFF9196FF), // primaryAccent\n-              borderRadius: BorderRadius.circular(2),\n+  Widget _buildAudioSection() {\n+    if (_isRecordingAudio) {\n+      return FadeTransition(\n+        opacity: _fadeAnimation,\n+        child: Column(\n+          children: [\n+            const SizedBox(height: 16),\n+            Row(\n+              mainAxisAlignment: MainAxisAlignment.center,\n+              children: [\n+                ScaleTransition(\n+                  scale: _micPulseController,\n+                  child: const Icon(Icons.mic, color: Colors.red, size: 30),\n+                ),\n+                const SizedBox(width: 8),\n+                Text(\n+                  \"Recording Audio... ${_formatDuration(_recordingDuration)}\",\n+                  style: const TextStyle(\n+                      fontFamily: 'Space Grotesk',\n+                      color: Color(0xFFDADADA),\n+                      fontSize: 16),\n+                ),\n+              ],\n             ),\n-          );\n-        }).toList(),\n-      ),\n-    );\n-  }\n-\n-  // Widget to display video preview\n-  Widget _buildVideoPreview() {\n-    if (_recordedVideoPath == null) return const SizedBox.shrink();\n-\n-    return Container(\n-      height: 200,\n-      margin: const EdgeInsets.only(top: 16),\n-      decoration: BoxDecoration(\n-        color: const Color(0xFF151515), // base2\n-        borderRadius: BorderRadius.circular(8),\n-      ),\n-      child: Column(\n-        mainAxisAlignment: MainAxisAlignment.center,\n-        children: [\n-          const Icon(\n-            Icons.play_circle_fill,\n-            size: 60,\n-            color: Color(0xFF9196FF), // primaryAccent\n-          ),\n-          const SizedBox(height: 16),\n-          const Text(\n-            'Video Recorded',\n-            style: TextStyle(\n-              fontFamily: 'Space Grotesk',\n-              fontSize: 16, // Body/B1-bold\n-              fontWeight: FontWeight.bold,\n-              color: Color(0xFFFFFFFF),\n-              height: 1.5, // 24px line height / 16px font size\n-              letterSpacing: 0,\n+            const SizedBox(height: 12),\n+            _buildWaveform(),\n+          ],\n+        ),\n+      );\n+    } else if (_recordedAudioPath != null) {\n+      return FadeTransition(\n+        opacity: _fadeAnimation,\n+        child: Column(\n+          crossAxisAlignment: CrossAxisAlignment.center,\n+          children: [\n+            const SizedBox(height: 16),\n+            Text(\n+              \"Audio Recorded - ${_formatDuration(_recordingDuration)}\",\n+              style: const TextStyle(\n+                fontFamily: 'Space Grotesk',\n+                color: Color(0xFFDADADA),\n+                fontSize: 16,\n+              ),\n             ),\n-          ),\n-          const SizedBox(height: 8),\n-          const Text(\n-            'Tap to play',\n-            style: TextStyle(\n-              fontFamily: 'Space Grotesk',\n-              fontSize: 14, // Body/B2-regular\n-              fontWeight: FontWeight.normal,\n-              color: Color(0xFFFFFFFF),\n-              height: 1.42, // 20px line height / 14px font size\n-              letterSpacing: 0,\n+            const SizedBox(height: 8),\n+            Container(\n+              padding: const EdgeInsets.all(12),\n+              decoration: BoxDecoration(\n+                color: const Color(0xFF1F1F1F),\n+                borderRadius: BorderRadius.circular(20),\n+              ),\n+              child: Row(\n+                children: [\n+                  IconButton(\n+                    icon: Icon(\n+                      _isPlayingAudio ? Icons.stop : Icons.play_arrow,\n+                      color: const Color(0xFF9196FF),\n+                    ),\n+                    onPressed: () async {\n+                      if (_isPlayingAudio) {\n+                        await _player.stopPlayer();\n+                        setState(() => _isPlayingAudio = false);\n+                      } else {\n+                        await _player.startPlayer(\n+                          fromURI: _recordedAudioPath!,\n+                          whenFinished: () => setState(() => _isPlayingAudio = false),\n+                        );\n+                        setState(() => _isPlayingAudio = true);\n+                      }\n+                    },\n+                  ),\n+                  Expanded(child: _buildWaveform()),\n+                  IconButton(\n+                    icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n+                    onPressed: _deleteAudio,\n+                  )\n+                ],\n+              ),\n             ),\n-          ),\n-        ],\n-      ),\n-    );\n+          ],\n+        ),\n+      );\n+    }\n+    return const SizedBox.shrink();\n   }\n \n-  @override\n-  Widget build(BuildContext context) {\n-    return Scaffold(\n-      appBar: AppBar(title: const Text('Host Questionnaire')),\n-      body: Padding(\n-        padding: const EdgeInsets.all(16.0),\n+  Widget _buildVideoSection() {\n+    if (_isRecordingVideo) {\n+      return FadeTransition(\n+        opacity: _fadeAnimation,\n         child: Column(\n-          crossAxisAlignment: CrossAxisAlignment.start,\n           children: [\n-            const Text(\n-              'Why do you want to become a Hotspot Host?',\n-              style: TextStyle(\n-                fontFamily: 'Space Grotesk',\n-                fontSize: 24, // Heading/H2-bold\n-                fontWeight: FontWeight.bold,\n-                color: Color(0xFFFFFFFF),\n-                height: 1.25, // 30px line height / 24px font size\n-                letterSpacing: -0.48, // -2% of 24px\n+            const SizedBox(height: 16),\n+            Text(\n+              \"Recording Video... ${_formatDuration(_recordingDuration)}\",\n+              style: const TextStyle(\n+                  fontFamily: 'Space Grotesk',\n+                  color: Color(0xFFDADADA),\n+                  fontSize: 16),\n+            ),\n+            const SizedBox(height: 12),\n+            if (_cameraController != null && _cameraController!.value.isInitialized)\n+              ClipRRect(\n+                borderRadius: BorderRadius.circular(16),\n+                child: SizedBox(\n+                  height: 160,\n+                  width: 180,\n+                  child: CameraPreview(_cameraController!),\n+                ),\n               ),\n-            ),\n+          ],\n+        ),\n+      );\n+    } else if (_recordedVideoPath != null &&\n+        _videoPlayerController != null &&\n+        _videoPlayerController!.value.isInitialized) {\n+      return FadeTransition(\n+        opacity: _fadeAnimation,\n+        child: Column(\n+          children: [\n             const SizedBox(height: 16),\n-            TextField(\n-              controller: _questionController,\n-              maxLines: 5,\n-              maxLength: 600,\n+            Text(\n+              \"Video Recorded - ${_formatDuration(_recordingDuration)}\",\n               style: const TextStyle(\n-                fontFamily: 'Space Grotesk',\n-                fontSize: 16, // Body/B1-regular\n-                fontWeight: FontWeight.normal,\n-                color: Color(0xFFFFFFFF),\n-                height: 1.5, // 24px line height / 16px font size\n-                letterSpacing: 0,\n-              ),\n-              decoration: InputDecoration(\n-                hintText: TextConstants.onboardingQuestionHint,\n-                hintStyle: CustomTextStyles.onboardingQuestionHint,\n-                border: OutlineInputBorder(\n-                  borderRadius: BorderRadius.circular(8),\n-                  borderSide: BorderSide(\n-                    color: Color(0xFFFFFF).withOpacity(0.16),\n-                  ), // border2\n+                  fontFamily: 'Space Grotesk',\n+                  color: Color(0xFFDADADA),\n\\ No newline at end of file\n+                  fontSize: 16),\n+            ),\n+            const SizedBox(height: 8),\n+            Stack(\n+              children: [\n+                ClipRRect(\n+                  borderRadius: BorderRadius.circular(16),\n+                  child: SizedBox(\n+                    width: 180,\n+                    height: 160,\n+                    child: VideoPlayer(_videoPlayerController!),\n+                  ),\n                 ),\n-                focusedBorder: OutlineInputBorder(\n-                  borderRadius: BorderRadius.circular(8),\n-                  borderSide: const BorderSide(\n-                    color: Color(0xFF9196FF),\n-                  ), // primaryAccent\n+                Positioned.fill(\n+                  child: Center(\n+                    child: IconButton(\n+                      icon: Icon(\n+                        _videoPlayerController!.value.isPlaying\n+                            ? Icons.pause_circle_filled\n+                            : Icons.play_circle_fill,\n+                        color: const Color(0xFF9196FF),\n+                        size: 50,\n+                      ),\n+                      onPressed: () {\n+                        if (_videoPlayerController!.value.isPlaying) {\n+                          _videoPlayerController!.pause();\n+                        } else {\n+                          _videoPlayerController!.play();\n+                        }\n+                        setState(() {});\n+                      },\n+                    ),\n+                  ),\n                 ),\n-                filled: true,\n-                fillColor: const Color(0xFF151515), // base2\n-                counterStyle: const TextStyle(\n-                  fontFamily: 'Space Grotesk',\n-                  fontSize: 12, // Subtext/S1-regular\n-                  fontWeight: FontWeight.normal,\n-                  color: Color(0xFFFFFFFF),\n-                  height: 1.33, // 16px line height / 12px font size\n-                  letterSpacing: 0,\n+                Positioned(\n+                  top: 4,\n+                  right: 4,\n+                  child: IconButton(\n+                    icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n+                    onPressed: _deleteVideo,\n+                  ),\n                 ),\n-              ),\n+              ],\n             ),\n-            const SizedBox(height: 24),\n+          ],\n+        ),\n+      );\n+    }\n+    return const SizedBox.shrink();\n+  }\n \n-            // Audio waveform visualization\n-            if (_isRecordingAudio) ...[\n+  @override\n+  Widget build(BuildContext context) {\n+    final canProceed = _controller.text.isNotEmpty ||\n+        _recordedAudioPath != null ||\n+        _recordedVideoPath != null;\n+\n+    return Scaffold(\n+      backgroundColor: const Color(0xFF0D0D0D),\n+      body: SafeArea(\n+        child: Container(\n+          decoration: const BoxDecoration(\n+            gradient: LinearGradient(\n+              colors: [Color(0xFF0D0D0D), Color(0xFF1A1A1A)],\n+              begin: Alignment.topCenter,\n+              end: Alignment.bottomCenter,\n+            ),\n+          ),\n+          padding: const EdgeInsets.all(20),\n+          child: Column(\n+            crossAxisAlignment: CrossAxisAlignment.start,\n+            children: [\n+              const SizedBox(height: 30),\n               const Text(\n-                'Recording Audio...',\n+                \"Why do you want to host with us?\",\n                 style: TextStyle(\n                   fontFamily: 'Space Grotesk',\n-                  fontSize: 20, // Heading/H3-bold\n+                  color: Colors.white,\n                   fontWeight: FontWeight.bold,\n-                  color: Color(0xFFFFFFFF),\n-                  height: 1.3, // 26px line height / 20px font size\n-                  letterSpacing: -0.2, // -1% of 20px\n+                  fontSize: 22,\n                 ),\n               ),\n-              const SizedBox(height: 8),\n-              _buildAudioWaveform(),\n-              const SizedBox(height: 16),\n-            ],\n-\n-            // Video preview\n-            _buildVideoPreview(),\n-\n-            const SizedBox(height: 24),\n-            const Text(\n-              'Record your response (Optional)',\n-              style: TextStyle(\n-                fontFamily: 'Space Grotesk',\n-                fontSize: 20, // Heading/H3-bold\n-                fontWeight: FontWeight.bold,\n-                color: Color(0xFFFFFFFF),\n-                height: 1.3, // 26px line height / 20px font size\n-                letterSpacing: -0.2, // -1% of 20px\n+              const SizedBox(height: 6),\n+              const Text(\n+                \"Tell us about your intent and what motivates you to create experiences.\",\n+                style: TextStyle(\n+                  fontFamily: 'Space Grotesk',\n+                  color: Colors.white70,\n+                  fontSize: 14,\n+                ),\n               ),\n-            ),\n-            const SizedBox(height: 16),\n-            Row(\n-              mainAxisAlignment: MainAxisAlignment.spaceEvenly,\n-              children: [\n-                // Audio recording button\n-                if (_recordedAudioPath == null)\n-                  Column(\n+              const SizedBox(height: 24),\n+              TextField(\n+                controller: _controller,\n+                maxLines: 5,\n+                style: const TextStyle(\n+                  color: Colors.white,\n+                  fontFamily: 'Space Grotesk',\n+                ),\n+                decoration: InputDecoration(\n+                  hintText: \"Start typing here...\",\n+                  hintStyle: const TextStyle(\n+                    color: Colors.white38,\n+                    fontFamily: 'Space Grotesk',\n+                  ),\n+                  filled: true,\n+                  fillColor: const Color(0xFF151515),\n+                  border: OutlineInputBorder(\n+                    borderRadius: BorderRadius.circular(16),\n+                    borderSide: BorderSide.none,\n+                  ),\n+                ),\n+              ),\n+              const SizedBox(height: 20),\n+              _buildAudioSection(),\n+              _buildVideoSection(),\n+              const Spacer(),\n+              Row(\n+                mainAxisAlignment: MainAxisAlignment.spaceBetween,\n+                children: [\n+                  Row(\n                     children: [\n-                      FloatingActionButton(\n+                      IconButton(\n+                        icon: Icon(\n+                          _isRecordingAudio ? Icons.stop : Icons.mic_none_outlined,\n+                          color: _isRecordingAudio\n+                              ? Colors.red\n+                              : (_recordedVideoPath != null\n+                                  ? Colors.grey\n+                                  : Colors.white),\n+                        ),\n                         onPressed: _isRecordingAudio\n                             ? _stopAudioRecording\n-                            : _startAudioRecording,\n-                        backgroundColor: _isRecordingAudio\n-                            ? const Color(0xFFC22743)\n-                            : const Color(\n-                                0xFF9196FF,\n-                              ), // negative : primaryAccent\n-                        child: Icon(\n-                          _isRecordingAudio ? Icons.stop : Icons.mic,\n-                          color: Colors.white,\n-                        ),\n+                            : (_recordedVideoPath != null\n+                                ? null\n+                                : _startAudioRecording),\n                       ),\n-                      const SizedBox(height: 8),\n-                      Text(\n-                        _isRecordingAudio ? 'Stop' : 'Record Audio',\n-                        style: const TextStyle(\n-                          fontFamily: 'Space Grotesk',\n-                          fontSize: 12, // Subtext/S1-regular\n-                          fontWeight: FontWeight.normal,\n-                          color: Color(0xFFFFFFFF),\n-                          height: 1.33, // 16px line height / 12px font size\n-                          letterSpacing: 0,\n+                      IconButton(\n+                        icon: Icon(\n+                          _isRecordingVideo ? Icons.stop : Icons.videocam_outlined,\n+                          color: _isRecordingVideo\n+                              ? Colors.red\n+                              : (_recordedAudioPath != null\n+                                  ? Colors.grey\n+                                  : Colors.white),\n                         ),\n-                      ),\n-                    ],\n-                  )\n-                else\n-                  Column(\n-                    children: [\n-                      FloatingActionButton(\n-                        onPressed: _deleteAudioRecording,\n-                        backgroundColor: const Color(0xFFC22743), // negative\n-                        child: const Icon(Icons.delete, color: Colors.white),\n-                      ),\n-                      const SizedBox(height: 8),\n-                      const Text(\n-                        'Delete Audio',\n-                        style: TextStyle(\n-                          fontFamily: 'Space Grotesk',\n-                          fontSize: 12, // Subtext/S1-regular\n-                          fontWeight: FontWeight.normal,\n-                          color: Color(0xFFFFFFFF),\n-                          height: 1.33, // 16px line height / 12px font size\n-                          letterSpacing: 0,\n-                        ),\n-                      ),\n-                    ],\n-                  ),\n-                // Video recording button\n-                if (_recordedVideoPath == null)\n-                  Column(\n-                    children: [\n-                      FloatingActionButton(\n                         onPressed: _isRecordingVideo\n                             ? _stopVideoRecording\n-                            : _startVideoRecording,\n-                        backgroundColor: _isRecordingVideo\n-                            ? const Color(0xFFC22743)\n-                            : const Color(\n-                                0xFF5961FF,\n-                              ), // negative : secondaryAccent\n-                        child: Icon(\n-                          _isRecordingVideo ? Icons.stop : Icons.videocam,\n-                          color: Colors.white,\n-                        ),\n+                            : (_recordedAudioPath != null\n+                                ? null\n+                                : _startVideoRecording),\n                       ),\n-                      const SizedBox(height: 8),\n-                      Text(\n-                        _isRecordingVideo ? 'Stop' : 'Record Video',\n-                        style: const TextStyle(\n-                          fontFamily: 'Space Grotesk',\n-                          fontSize: 12, // Subtext/S1-regular\n-                          fontWeight: FontWeight.normal,\n-                          color: Color(0xFFFFFFFF),\n-                          height: 1.33, // 16px line height / 12px font size\n-                          letterSpacing: 0,\n-                        ),\n-                      ),\n                     ],\n-                  )\n-                else\n-                  Column(\n-                    children: [\n-                      FloatingActionButton(\n-                        onPressed: _deleteVideoRecording,\n-                        backgroundColor: const Color(0xFFC22743), // negative\n-                        child: const Icon(Icons.delete, color: Colors.white),\n-                      ),\n-                      const SizedBox(height: 8),\n-                      const Text(\n-                        'Delete Video',\n-                        style: TextStyle(\n+                  ),\n+                  ElevatedButton(\n+                    style: ElevatedButton.styleFrom(\n+                      backgroundColor: canProceed\n+                          ? const Color(0xFF9196FF)\n+                          : const Color(0xFF2A2A2A),\n+                      shape: RoundedRectangleBorder(\n+                          borderRadius: BorderRadius.circular(16)),\n+                      padding: const EdgeInsets.symmetric(\n+                          horizontal: 32, vertical: 14),\n+                    ),\n+                    onPressed: canProceed\n+                        ? () {\n+                            ScaffoldMessenger.of(context).showSnackBar(\n+                              const SnackBar(\n+                                  content:\n+                                      Text(\"Response submitted successfully!\")),\n+                            );\n+                          }\n+                        : null,\n+                    child: const Text(\n+                      \"Next\",\n+                      style: TextStyle(\n                           fontFamily: 'Space Grotesk',\n-                          fontSize: 12, // Subtext/S1-regular\n-                          fontWeight: FontWeight.normal,\n-                          color: Color(0xFFFFFFFF),\n-                          height: 1.33, // 16px line height / 12px font size\n-                          letterSpacing: 0,\n-                        ),\n-                      ),\n-                    ],\n+                          fontWeight: FontWeight.bold,\n+                          color: Colors.white),\n+                    ),\n                   ),\n-              ],\n-            ),\n-            const Spacer(),\n-            SizedBox(\n-              width: double.infinity,\n-              child: ElevatedButton(\n-                onPressed: _submitQuestionnaire,\n-                style: ElevatedButton.styleFrom(\n-                  padding: const EdgeInsets.symmetric(vertical: 16),\n-                  shape: RoundedRectangleBorder(\n-                    borderRadius: BorderRadius.circular(12),\n-                  ),\n-                  backgroundColor: const Color(0xFF9196FF), // primaryAccent\n-                ),\n-                child: const Text(\n-                  'Submit',\n-                  style: TextStyle(\n-                    fontFamily: 'Space Grotesk',\n-                    fontSize: 16, // Body/B1-bold\n-                    fontWeight: FontWeight.bold,\n-                    color: Color(0xFFFFFFFF),\n-                    height: 1.5, // 24px line height / 16px font size\n-                    letterSpacing: 0,\n-                  ),\n-                ),\n+                ],\n               ),\n-            ),\n-          ],\n+              const SizedBox(height: 10),\n+            ],\n+          ),\n         ),\n       ),\n     );\n   }\n \n   @override\n   void dispose() {\n-    _questionController.dispose();\n-    _audioRecorder.closeRecorder();\n-    _buttonAnimationController.dispose();\n-    _waveformAnimationController.dispose();\n+    _controller.dispose();\n+    _recorder.closeRecorder();\n+    _player.closePlayer();\n+    _videoPlayerController?.dispose();\n+    _cameraController?.dispose();\n+    _fadeController.dispose();\n+    _micPulseController.dispose();\n+    _recordingTimer?.cancel();\n     super.dispose();\n   }\n-}\n+}\n"
                },
                {
                    "date": 1762457566435,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -187,9 +187,9 @@\n                 ),\n               ],\n             ),\n             const SizedBox(height: 12),\n-            _buildWaveform(),\n+          \n           ],\n         ),\n       );\n     } else if (_recordedAudioPath != null) {\n@@ -491,5 +491,5 @@\n     _micPulseController.dispose();\n     _recordingTimer?.cancel();\n     super.dispose();\n   }\n-}\n\\ No newline at end of file\n+}\n"
                },
                {
                    "date": 1762457571733,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -233,9 +233,9 @@\n                         setState(() => _isPlayingAudio = true);\n                       }\n                     },\n                   ),\n-                  Expanded(child: _buildWaveform()),\n+                  // Expanded(child: _buildWaveform()),\n                   IconButton(\n                     icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n                     onPressed: _deleteAudio,\n                   )\n"
                },
                {
                    "date": 1762457582940,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -233,8 +233,9 @@\n                         setState(() => _isPlayingAudio = true);\n                       }\n                     },\n                   ),\n+                  \n                   // Expanded(child: _buildWaveform()),\n                   IconButton(\n                     icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n                     onPressed: _deleteAudio,\n"
                },
                {
                    "date": 1762457591922,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import 'dart:math';\n import 'package:camera/camera.dart';\n import 'package:flutter/material.dart';\n import 'package:flutter_sound/flutter_sound.dart';\n+import 'package:hotspots_hostes/models/wave_line.dart';\n import 'package:path_provider/path_provider.dart';\n import 'package:permission_handler/permission_handler.dart';\n import 'package:video_player/video_player.dart';\n \n@@ -233,9 +234,9 @@\n                         setState(() => _isPlayingAudio = true);\n                       }\n                     },\n                   ),\n-                  \n+                  StaticWaveformLine(fillFraction: fillFraction)\n                   // Expanded(child: _buildWaveform()),\n                   IconButton(\n                     icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n                     onPressed: _deleteAudio,\n"
                },
                {
                    "date": 1762457597054,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -234,9 +234,9 @@\n                         setState(() => _isPlayingAudio = true);\n                       }\n                     },\n                   ),\n-                  StaticWaveformLine(fillFraction: fillFraction)\n+                  StaticWaveformLine(fillFraction: 0.66),\n                   // Expanded(child: _buildWaveform()),\n                   IconButton(\n                     icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n                     onPressed: _deleteAudio,\n"
                },
                {
                    "date": 1762457615057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -235,9 +235,9 @@\n                       }\n                     },\n                   ),\n                   StaticWaveformLine(fillFraction: 0.66),\n-                  // Expanded(child: _buildWaveform()),\n+                  Expanded(child: _buildWaveform()),\n                   IconButton(\n                     icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n                     onPressed: _deleteAudio,\n                   )\n"
                },
                {
                    "date": 1762457622749,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,9 +3,8 @@\n import 'dart:math';\n import 'package:camera/camera.dart';\n import 'package:flutter/material.dart';\n import 'package:flutter_sound/flutter_sound.dart';\n-import 'package:hotspots_hostes/models/wave_line.dart';\n import 'package:path_provider/path_provider.dart';\n import 'package:permission_handler/permission_handler.dart';\n import 'package:video_player/video_player.dart';\n \n@@ -163,8 +162,25 @@\n       _videoPlayerController = null;\n     });\n   }\n \n+  Widget _buildWaveform() {\n+    return Row(\n+      mainAxisAlignment: MainAxisAlignment.center,\n+      children: _waveform.map((h) {\n+        return Container(\n+          width: 3,\n+          height: h,\n+          margin: const EdgeInsets.symmetric(horizontal: 2),\n+          decoration: BoxDecoration(\n+            color: const Color(0xFF9196FF),\n+            borderRadius: BorderRadius.circular(2),\n+          ),\n+        );\n+      }).toList(),\n+    );\n+  }\n+\n   Widget _buildAudioSection() {\n     if (_isRecordingAudio) {\n       return FadeTransition(\n         opacity: _fadeAnimation,\n@@ -188,9 +204,9 @@\n                 ),\n               ],\n             ),\n             const SizedBox(height: 12),\n-          \n+            _buildWaveform(),\n           ],\n         ),\n       );\n     } else if (_recordedAudioPath != null) {\n@@ -234,10 +250,9 @@\n                         setState(() => _isPlayingAudio = true);\n                       }\n                     },\n                   ),\n-                  StaticWaveformLine(fillFraction: fillFraction)\n-                  // Expanded(child: _buildWaveform()),\n+                  Expanded(child: _buildWaveform()),\n                   IconButton(\n                     icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n                     onPressed: _deleteAudio,\n                   )\n"
                },
                {
                    "date": 1762496087968,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,578 @@\n+    return Scaffold(\n+      backgroundColor: Colors.transparent,\n+      extendBodyBehindAppBar: true,\n+      body: ZigzagBackground(\n+        child: SafeArea(\n+          child: Padding(\n+            padding: const EdgeInsets.symmetric(\n+              horizontal: 14.0,\n+              vertical: 10.0,\n+            ),\n+            child: Column(\n+              children: <Widget>[\n+                Row(\n+                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n+                  children: [\n+                    IconButton(\n+                      icon: const Icon(Icons.arrow_back, color: Colors.white),\n+                      onPressed: () {},\n+                    ),\n+                    StaticWaveformLine(fillFraction: 0.66),\n+                    IconButton(\n+                      icon: const Icon(Icons.close, color: Colors.white),\n+                      onPressed: () {},\n+                    ),\n+                  ],\n+                ),\n+\n+                // Make main content scrollable to avoid render overflow when\n+                // recording widgets expand (waveform, video preview, etc.)\n+                const SizedBox(height: 8),\n+                Expanded(\n+                  child: SingleChildScrollView(\n+                    child: Column(\n+                      crossAxisAlignment: CrossAxisAlignment.start,\n+                      children: [\n+                        const SizedBox(height: 8),\n+                        const Text(\n+                          \"Why do you want to host with us?\",\n+                          style: TextStyle(\n+                            fontFamily: 'Space Grotesk',\n+                            color: Colors.white,\n+                            fontWeight: FontWeight.bold,\n+                            fontSize: 22,\n+                          ),\n+                          textAlign: TextAlign.left,\n+                        ),\n+                        const SizedBox(height: 6),\n+                        const Text(\n+                          \"Tell us about your intent and what motivates you to create experiences.\",\n+                          style: TextStyle(\n+                            fontFamily: 'Space Grotesk',\n+                            color: Colors.white70,\n+                            fontSize: 14,\n+                          ),\n+                          textAlign: TextAlign.left,\n+                        ),\n+                        const SizedBox(height: 24),\n+                        TextField(\n+                          controller: _controller,\n+                          maxLines: 5,\n+                          style: const TextStyle(\n+                            color: Colors.white,\n+                            fontFamily: 'Space Grotesk',\n+                          ),\n+                          decoration: InputDecoration(\n+                            hintText: \"Start typing here...\",\n+                            hintStyle: const TextStyle(\n+                              color: Colors.white38,\n+                              fontFamily: 'Space Grotesk',\n+                            ),\n+                            filled: true,\n+                            fillColor: const Color(0xFF151515),\n+                            border: OutlineInputBorder(\n+                              borderRadius: BorderRadius.circular(16),\n+                              borderSide: BorderSide.none,\n+                            ),\n+                          ),\n+                        ),\n+                        const SizedBox(height: 20),\n+                        _buildAudioSection(),\n+                        _buildVideoSection(),\n+                        const SizedBox(height: 24),\n+                      ],\n+                    ),\n+                  ),\n+                ),\n+\n+                // Bottom controls: recording buttons + next button (fixed)\n+                Row(\n+                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n+                  children: [\n+                    Row(\n+                      children: [\n+                        // Audio record / stop\n+                        IconButton(\n+                          icon: Icon(\n+                            _isRecordingAudio ? Icons.stop : Icons.mic_none_outlined,\n+                            color: _isRecordingAudio\n+                                ? Colors.red\n+                                : (_recordedVideoPath != null ? Colors.grey : Colors.white),\n+                          ),\n+                          onPressed: _isRecordingAudio\n+                              ? _stopAudioRecording\n+                              : (_recordedVideoPath != null ? null : _startAudioRecording),\n+                        ),\n+\n+                        // Video record / stop\n+                        IconButton(\n+                          icon: Icon(\n+                            _isRecordingVideo ? Icons.stop : Icons.videocam_outlined,\n+                            color: _isRecordingVideo\n+                                ? Colors.red\n+                                : (_recordedAudioPath != null ? Colors.grey : Colors.white),\n+                          ),\n+                          onPressed: _isRecordingVideo\n+                              ? _stopVideoRecording\n+                              : (_recordedAudioPath != null ? null : _startVideoRecording),\n+                        ),\n+                      ],\n+                    ),\n+\n+                    // Next button expands to take available space\n+                    Expanded(\n+                      child: GradientNextButton(\n+                        isEnabled: canProceed,\n+                        onPressed: canProceed\n+                            ? () {\n+                                ScaffoldMessenger.of(context).showSnackBar(\n+                                  const SnackBar(\n+                                    content: Text(\n+                                      \"Response submitted successfully!\",\n+                                    ),\n+                                  ),\n+                                );\n+                              }\n+                            : null,\n+                      ),\n+                    ),\n+                  ],\n+                ),\n+                const SizedBox(height: 10),\n+              ],\n+            ),\n+          ),\n+        ),\n+      ),\n+    );\n+    setState(() => _isRecordingAudio = false);\n+  }\n+\n+  Future<void> _startVideoRecording() async {\n+    final status = await Permission.camera.request();\n+    if (!status.isGranted) return;\n+    try {\n+      await _cameraController?.startVideoRecording();\n+      _startTimer();\n+      setState(() => _isRecordingVideo = true);\n+    } catch (e) {\n+      debugPrint('Failed to start video recording: $e');\n+    }\n+  }\n+\n+  Future<void> _stopVideoRecording() async {\n+    final result = await _cameraController?.stopVideoRecording();\n+    _stopTimer();\n+    if (result != null) {\n+      _recordedVideoPath = result.path;\n+      _videoPlayerController = VideoPlayerController.file(File(result.path))\n+        ..initialize().then((_) => setState(() {}));\n+    }\n+    setState(() => _isRecordingVideo = false);\n+  }\n+\n+  void _deleteAudio() {\n+    if (_recordedAudioPath != null) File(_recordedAudioPath!).delete();\n+    setState(() => _recordedAudioPath = null);\n+  }\n+\n+  void _deleteVideo() {\n+    if (_recordedVideoPath != null) File(_recordedVideoPath!).delete();\n+    setState(() {\n+      _recordedVideoPath = null;\n+      _videoPlayerController = null;\n+    });\n+  }\n+\n+  Widget _buildWaveform() => Row(\n+    mainAxisAlignment: MainAxisAlignment.center,\n+    children: _waveform\n+        .map(\n+          (h) => Container(\n+            width: 3,\n+            height: h,\n+            margin: const EdgeInsets.symmetric(horizontal: 2),\n+            decoration: BoxDecoration(\n+              color: const Color(0xFF9196FF),\n+              borderRadius: BorderRadius.circular(2),\n+            ),\n+          ),\n+        )\n+        .toList(),\n+  );\n+\n+  Widget _buildAudioSection() {\n+    if (_isRecordingAudio) {\n+      return _buildAudioCard(\n+        title: \"Audio is recording...\",\n+        trailing: IconButton(\n+          icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n+          onPressed: _deleteAudio,\n+        ),\n+        child: Column(\n+          children: [\n+            Row(\n+              mainAxisAlignment: MainAxisAlignment.center,\n+              children: [\n+                ScaleTransition(\n+                  scale: _micPulseController,\n+                  child: const Icon(Icons.mic, color: Colors.red, size: 28),\n+                ),\n+                const SizedBox(width: 8),\n+                _buildWaveform(),\n+                const SizedBox(width: 8),\n+                Text(\n+                  _formatDuration(_recordingDuration),\n+                  style: const TextStyle(\n+                    color: Color(0xFFDADADA),\n+                    fontFamily: 'Space Grotesk',\n+                    fontSize: 14,\n+                  ),\n+                ),\n+              ],\n+            ),\n+          ],\n+        ),\n+      );\n+    } else if (_recordedAudioPath != null) {\n+      return _buildAudioCard(\n+        title: \"Audio recorded - ${_formatDuration(_recordingDuration)}\",\n+        trailing: IconButton(\n+          icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n+          onPressed: _deleteAudio,\n+        ),\n+        child: Row(\n+          mainAxisAlignment: MainAxisAlignment.center,\n+          children: [\n+            IconButton(\n+              icon: Icon(\n+                _isPlayingAudio ? Icons.stop : Icons.play_arrow,\n+                color: const Color(0xFF9196FF),\n+              ),\n+              onPressed: () async {\n+                if (_isPlayingAudio) {\n+                  await _player.stopPlayer();\n+                  setState(() => _isPlayingAudio = false);\n+                } else {\n+                  await _player.startPlayer(\n+                    fromURI: _recordedAudioPath!,\n+                    whenFinished: () => setState(() => _isPlayingAudio = false),\n+                  );\n+                  setState(() => _isPlayingAudio = true);\n+                }\n+              },\n+            ),\n+            Expanded(child: _buildWaveform()),\n+          ],\n+        ),\n+      );\n+    }\n+    return const SizedBox.shrink();\n+  }\n+\n+  Widget _buildAudioCard({\n+    required String title,\n+    required Widget child,\n+    Widget? trailing,\n+  }) {\n+    return Container(\n+      margin: const EdgeInsets.symmetric(vertical: 10),\n+      padding: const EdgeInsets.all(14),\n+      decoration: BoxDecoration(\n+        color: const Color(0xFF1C1C1C),\n+        borderRadius: BorderRadius.circular(20),\n+      ),\n+      child: Column(\n+        crossAxisAlignment: CrossAxisAlignment.start,\n+        children: [\n+          Row(\n+            mainAxisAlignment: MainAxisAlignment.spaceBetween,\n+            children: [\n+              Text(\n+                title,\n+                style: const TextStyle(\n+                  color: Color(0xFFDADADA),\n+                  fontFamily: 'Space Grotesk',\n+                  fontSize: 16,\n+                ),\n+              ),\n+              if (trailing != null) trailing,\n+            ],\n+          ),\n+          const SizedBox(height: 10),\n+          child,\n+        ],\n+      ),\n+    );\n+  }\n+\n+  Widget _buildVideoSection() {\n+    if (_isRecordingVideo) {\n+      return _buildVideoCard(\n+        title: \"Recording Video... ${_formatDuration(_recordingDuration)}\",\n+        trailing: IconButton(\n+          icon: const Icon(Icons.switch_camera, color: Color(0xFF9196FF)),\n+          onPressed: _switchCamera,\n+        ),\n+        child: ClipRRect(\n+          borderRadius: BorderRadius.circular(16),\n+          child: SizedBox(\n+            height: 180,\n+            width: 200,\n+            child:\n+                _cameraController != null &&\n+                    _cameraController!.value.isInitialized\n+                ? CameraPreview(_cameraController!)\n+                : const Center(\n+                    child: CircularProgressIndicator(color: Colors.white),\n+                  ),\n+          ),\n+        ),\n+      );\n+    } else if (_recordedVideoPath != null &&\n+        _videoPlayerController != null &&\n+        _videoPlayerController!.value.isInitialized) {\n+      return _buildVideoCard(\n+        title: \"Video Recorded - ${_formatDuration(_recordingDuration)}\",\n+        trailing: IconButton(\n+          icon: const Icon(Icons.delete, color: Color(0xFFC22743)),\n+          onPressed: _deleteVideo,\n+        ),\n+        child: Stack(\n+          children: [\n+            ClipRRect(\n+              borderRadius: BorderRadius.circular(16),\n+              child: SizedBox(\n+                width: 200,\n+                height: 180,\n+                child: VideoPlayer(_videoPlayerController!),\n+              ),\n+            ),\n+            Positioned.fill(\n+              child: Center(\n+                child: IconButton(\n+                  icon: Icon(\n+                    _videoPlayerController!.value.isPlaying\n+                        ? Icons.pause_circle\n+                        : Icons.play_circle_fill,\n+                    size: 50,\n+                    color: const Color(0xFF9196FF),\n+                  ),\n+                  onPressed: () {\n+                    if (_videoPlayerController!.value.isPlaying) {\n+                      _videoPlayerController!.pause();\n+                    } else {\n+                      _videoPlayerController!.play();\n+                    }\n+                    setState(() {});\n+                  },\n+                ),\n+              ),\n+            ),\n+          ],\n+        ),\n+      );\n+    }\n+    return const SizedBox.shrink();\n+  }\n+\n+  Widget _buildVideoCard({\n+    required String title,\n+    required Widget child,\n+    Widget? trailing,\n+  }) {\n+    return Container(\n+      margin: const EdgeInsets.symmetric(vertical: 10),\n+      padding: const EdgeInsets.all(14),\n+      decoration: BoxDecoration(\n+        color: const Color(0xFF1C1C1C),\n+        borderRadius: BorderRadius.circular(20),\n+      ),\n+      child: Column(\n+        crossAxisAlignment: CrossAxisAlignment.start,\n+        children: [\n+          Row(\n+            mainAxisAlignment: MainAxisAlignment.spaceBetween,\n+            children: [\n+              Text(\n+                title,\n+                style: const TextStyle(\n+                  color: Color(0xFFDADADA),\n+                  fontFamily: 'Space Grotesk',\n+                  fontSize: 16,\n+                ),\n+              ),\n+              if (trailing != null) trailing,\n+            ],\n+          ),\n+          const SizedBox(height: 10),\n+          child,\n+        ],\n+      ),\n+    );\n+  }\n+\n+  @override\n+  Widget build(BuildContext context) {\n+    final canProceed =\n+        _controller.text.isNotEmpty ||\n+        _recordedAudioPath != null ||\n+        _recordedVideoPath != null;\n+\n+    return Scaffold(\n+      backgroundColor: Colors.transparent,\n+      extendBodyBehindAppBar: true,\n+      body: ZigzagBackground(\n+        child: SafeArea(\n+          child: Padding(\n+            padding: const EdgeInsets.symmetric(\n+              horizontal: 14.0,\n+              vertical: 10.0,\n+            ),\n+            child: Column(\n+              children: <Widget>[\n+                Row(\n+                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n+                  children: [\n+                    IconButton(\n+                      icon: const Icon(Icons.arrow_back, color: Colors.white),\n+                      onPressed: () {},\n+                    ),\n+                    StaticWaveformLine(fillFraction: 0.66),\n+                    IconButton(\n+                      icon: const Icon(Icons.close, color: Colors.white),\n+                      onPressed: () {},\n+                    ),\n+                  ],\n+                ),\n+                Spacer(),\n+                // const SizedBox(height: 30),\n+                const Text(\n+                  \"Why do you want to host with us?\",\n+                  style: TextStyle(\n+                    fontFamily: 'Space Grotesk',\n+                    color: Colors.white,\n+                    fontWeight: FontWeight.bold,\n+                    fontSize: 22,\n+                  ),\n+                  textAlign: TextAlign.left,\n+                ),\n+                const SizedBox(height: 6),\n+                Padding(\n+                  padding: const EdgeInsets.all(0.0),\n+                  child: const Text(\n+                    \"Tell us about your intent and what motivates you to create experiences.\",\n+                    style: TextStyle(\n+                      fontFamily: 'Space Grotesk',\n+                      color: Colors.white70,\n+                      fontSize: 14,\n+                    ),\n+                    textAlign: TextAlign.left,\n+                  ),\n+                ),\n+                const SizedBox(height: 24),\n+                TextField(\n+                  controller: _controller,\n+                  maxLines: 5,\n+                  style: const TextStyle(\n+                    color: Colors.white,\n+                    fontFamily: 'Space Grotesk',\n+                  ),\n+                  decoration: InputDecoration(\n+                    hintText: \"Start typing here...\",\n+                    hintStyle: const TextStyle(\n+                      color: Colors.white38,\n+                      fontFamily: 'Space Grotesk',\n+                    ),\n+                    filled: true,\n+                    fillColor: const Color(0xFF151515),\n+                    border: OutlineInputBorder(\n+                      borderRadius: BorderRadius.circular(16),\n+                      borderSide: BorderSide.none,\n+                    ),\n+                  ),\n+                ),\n+                const SizedBox(height: 20),\n+                _buildAudioSection(),\n+                _buildVideoSection(),\n+\n+                Row(\n+                  mainAxisAlignment: MainAxisAlignment.spaceBetween,\n+                  children: [\n+                    Row(\n+                      children: [\n+                        IconButton(\n+                          icon: Icon(\n+                            _isRecordingAudio\n+                                ? Icons.stop\n+                                : Icons.mic_none_outlined,\n+                            color: _isRecordingAudio\n+                                ? Colors.red\n+                                : (_recordedVideoPath != null\n+                                      ? Colors.grey\n+                                      : Colors.white),\n+                          ),\n+                          onPressed: _isRecordingAudio\n+                              ? _stopAudioRecording\n+                              : (_recordedVideoPath != null\n+                                    ? null\n+                                    : _startAudioRecording),\n+                        ),\n+                        IconButton(\n+                          icon: Icon(\n+                            _isRecordingVideo\n+                                ? Icons.stop\n+                                : Icons.videocam_outlined,\n+                            color: _isRecordingVideo\n+                                ? Colors.red\n+                                : (_recordedAudioPath != null\n+                                      ? Colors.grey\n+                                      : Colors.white),\n+                          ),\n+                          onPressed: _isRecordingVideo\n+                              ? _stopVideoRecording\n+                              : (_recordedAudioPath != null\n+                                    ? null\n+                                    : _startVideoRecording),\n+                        ),\n+                      ],\n+                    ),\n+                    Expanded(\n+                      child: GradientNextButton(\n+                        isEnabled: canProceed,\n+                        onPressed: canProceed\n+                            ? () {\n+                                ScaffoldMessenger.of(context).showSnackBar(\n+                                  const SnackBar(\n+                                    content: Text(\n+                                      \"Response submitted successfully!\",\n+                                    ),\n+                                  ),\n+                                );\n+                              }\n+                            : null,\n+                      ),\n+                    ),\n+                  ],\n+                ),\n+                const SizedBox(height: 10),\n+              ],\n+            ),\n+          ),\n+        ),\n+      ),\n+    );\n+  }\n+\n+  @override\n+  void dispose() {\n+    _controller.dispose();\n+    _recorder.closeRecorder();\n+    _player.closePlayer();\n+    _videoPlayerController?.dispose();\n+    _cameraController?.dispose();\n+    _micPulseController.dispose();\n+    _recordingTimer?.cancel();\n+    super.dispose();\n+  }\n+}\n"
                }
            ],
            "date": 1762436561377,
            "name": "Commit-0",
            "content": "import 'dart:io';\nimport 'dart:math';\n\nimport 'package:flutter/material.dart';\nimport 'package:flutter_sound/flutter_sound.dart';\nimport 'package:path_provider/path_provider.dart';\nimport 'package:permission_handler/permission_handler.dart';\nimport 'package:hotspots_hostes/constants/text_constants.dart';\nimport 'package:hotspots_hostes/constants/text_styles.dart';\n\nclass OnboardingQuestionScreen extends StatefulWidget {\n  final List<int> selectedExperienceIds;\n  final String experienceDescription;\n\n  const OnboardingQuestionScreen({\n    super.key,\n    required this.selectedExperienceIds,\n    required this.experienceDescription,\n  });\n\n  @override\n  State<OnboardingQuestionScreen> createState() =>\n      _OnboardingQuestionScreenState();\n}\n\nclass _OnboardingQuestionScreenState extends State<OnboardingQuestionScreen>\n    with TickerProviderStateMixin {\n  final TextEditingController _questionController = TextEditingController();\n  String? _recordedAudioPath;\n  String? _recordedVideoPath;\n  bool _isRecordingAudio = false;\n  bool _isRecordingVideo = false;\n\n  late FlutterSoundRecorder _audioRecorder;\n  late AnimationController _buttonAnimationController;\n\n  // For audio waveform visualization\n  List<double> _audioWaveform = [];\n  late AnimationController _waveformAnimationController;\n\n  @override\n  void initState() {\n    super.initState();\n    _audioRecorder = FlutterSoundRecorder();\n    _buttonAnimationController = AnimationController(\n      duration: const Duration(milliseconds: 300),\n      vsync: this,\n    );\n\n    _waveformAnimationController = AnimationController(\n      duration: const Duration(milliseconds: 1000),\n      vsync: this,\n    )..repeat();\n\n    // Initialize the audio recorder\n    _audioRecorder.openRecorder();\n  }\n\n  void _startAudioRecording() async {\n    // Check and request permission\n    if (await Permission.microphone.request().isGranted) {\n      setState(() {\n        _isRecordingAudio = true;\n        _audioWaveform = List.generate(50, (index) => 0.0);\n      });\n\n      // Animate button width\n      _buttonAnimationController.forward();\n\n      // Start recording\n      final directory = await getApplicationDocumentsDirectory();\n      final filePath =\n          '${directory.path}/recording_${DateTime.now().millisecondsSinceEpoch}.aac';\n\n      await _audioRecorder.startRecorder(toFile: filePath);\n\n      // Simulate waveform updates\n      _simulateWaveform();\n    }\n  }\n\n  void _simulateWaveform() {\n    if (!_isRecordingAudio) return;\n\n    // Generate random waveform data\n    List<double> newWaveform = List.generate(\n      50,\n      (index) => Random().nextDouble() * 100,\n    );\n\n    setState(() {\n      _audioWaveform = newWaveform;\n    });\n\n    // Continue simulation\n    Future.delayed(const Duration(milliseconds: 100), _simulateWaveform);\n  }\n\n  void _stopAudioRecording() async {\n    await _audioRecorder.stopRecorder();\n    final directory = await getApplicationDocumentsDirectory();\n    final filePath =\n        '${directory.path}/recording_${DateTime.now().millisecondsSinceEpoch}.aac';\n\n    setState(() {\n      _isRecordingAudio = false;\n      _recordedAudioPath = filePath;\n      _audioWaveform = [];\n    });\n\n    // Reset button animation\n    _buttonAnimationController.reverse();\n  }\n\n  void _deleteAudioRecording() {\n    if (_recordedAudioPath != null) {\n      File(_recordedAudioPath!).delete();\n    }\n    setState(() {\n      _recordedAudioPath = null;\n    });\n  }\n\n  void _startVideoRecording() async {\n    // Check and request permission\n    if (await Permission.camera.request().isGranted) {\n      setState(() {\n        _isRecordingVideo = true;\n      });\n\n      // Animate button width\n      _buttonAnimationController.forward();\n\n      // Start recording (simplified for this example)\n      // In a real app, you would use the camera package to record video\n      Future.delayed(const Duration(seconds: 5), () {\n        _stopVideoRecording();\n      });\n    }\n  }\n\n  void _stopVideoRecording() {\n    setState(() {\n      _isRecordingVideo = false;\n      _recordedVideoPath = 'video_path_placeholder';\n    });\n\n    // Reset button animation\n    _buttonAnimationController.reverse();\n  }\n\n  void _deleteVideoRecording() {\n    if (_recordedVideoPath != null &&\n        _recordedVideoPath != 'video_path_placeholder') {\n      File(_recordedVideoPath!).delete();\n    }\n    setState(() {\n      _recordedVideoPath = null;\n    });\n  }\n\n  void _submitQuestionnaire() {\n    // Log the state\n    print('Selected Experience IDs: ${widget.selectedExperienceIds}');\n    print('Experience Description: ${widget.experienceDescription}');\n    print('Question Response: ${_questionController.text}');\n    print('Recorded Audio Path: $_recordedAudioPath');\n    print('Recorded Video Path: $_recordedVideoPath');\n\n    // Show success message\n    ScaffoldMessenger.of(context).showSnackBar(\n      const SnackBar(\n        content: Text('Questionnaire submitted successfully!'),\n        backgroundColor: Color(0xFF5961FF), // secondaryAccent\n      ),\n    );\n  }\n\n  // Widget to display audio waveform\n  Widget _buildAudioWaveform() {\n    if (_audioWaveform.isEmpty) return const SizedBox.shrink();\n\n    return Container(\n      height: 100,\n      padding: const EdgeInsets.all(16),\n      decoration: BoxDecoration(\n        color: const Color(0xFF151515), // base2\n        borderRadius: BorderRadius.circular(8),\n      ),\n      child: Row(\n        mainAxisAlignment: MainAxisAlignment.spaceEvenly,\n        children: _audioWaveform.map((amplitude) {\n          return Container(\n            width: 4,\n            height: max(2, amplitude),\n            decoration: BoxDecoration(\n              color: const Color(0xFF9196FF), // primaryAccent\n              borderRadius: BorderRadius.circular(2),\n            ),\n          );\n        }).toList(),\n      ),\n    );\n  }\n\n  // Widget to display video preview\n  Widget _buildVideoPreview() {\n    if (_recordedVideoPath == null) return const SizedBox.shrink();\n\n    return Container(\n      height: 200,\n      margin: const EdgeInsets.only(top: 16),\n      decoration: BoxDecoration(\n        color: const Color(0xFF151515), // base2\n        borderRadius: BorderRadius.circular(8),\n      ),\n      child: Column(\n        mainAxisAlignment: MainAxisAlignment.center,\n        children: [\n          const Icon(\n            Icons.play_circle_fill,\n            size: 60,\n            color: Color(0xFF9196FF), // primaryAccent\n          ),\n          const SizedBox(height: 16),\n          const Text(\n            'Video Recorded',\n            style: TextStyle(\n              fontFamily: 'Space Grotesk',\n              fontSize: 16, // Body/B1-bold\n              fontWeight: FontWeight.bold,\n              color: Color(0xFFFFFFFF),\n              height: 1.5, // 24px line height / 16px font size\n              letterSpacing: 0,\n            ),\n          ),\n          const SizedBox(height: 8),\n          const Text(\n            'Tap to play',\n            style: TextStyle(\n              fontFamily: 'Space Grotesk',\n              fontSize: 14, // Body/B2-regular\n              fontWeight: FontWeight.normal,\n              color: Color(0xFFFFFFFF),\n              height: 1.42, // 20px line height / 14px font size\n              letterSpacing: 0,\n            ),\n          ),\n        ],\n      ),\n    );\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(title: const Text('Host Questionnaire')),\n      body: Padding(\n        padding: const EdgeInsets.all(16.0),\n        child: Column(\n          crossAxisAlignment: CrossAxisAlignment.start,\n          children: [\n            const Text(\n              'Why do you want to become a Hotspot Host?',\n              style: TextStyle(\n                fontFamily: 'Space Grotesk',\n                fontSize: 24, // Heading/H2-bold\n                fontWeight: FontWeight.bold,\n                color: Color(0xFFFFFFFF),\n                height: 1.25, // 30px line height / 24px font size\n                letterSpacing: -0.48, // -2% of 24px\n              ),\n            ),\n            const SizedBox(height: 16),\n            TextField(\n              controller: _questionController,\n              maxLines: 5,\n              maxLength: 600,\n              style: const TextStyle(\n                fontFamily: 'Space Grotesk',\n                fontSize: 16, // Body/B1-regular\n                fontWeight: FontWeight.normal,\n                color: Color(0xFFFFFFFF),\n                height: 1.5, // 24px line height / 16px font size\n                letterSpacing: 0,\n              ),\n              decoration: InputDecoration(\n                hintText: TextConstants.onboardingQuestionHint,\n                hintStyle: CustomTextStyles.onboardingQuestionHint,\n                border: OutlineInputBorder(\n                  borderRadius: BorderRadius.circular(8),\n                  borderSide: BorderSide(\n                    color: Color(0xFFFFFF).withOpacity(0.16),\n                  ), // border2\n                ),\n                focusedBorder: OutlineInputBorder(\n                  borderRadius: BorderRadius.circular(8),\n                  borderSide: const BorderSide(\n                    color: Color(0xFF9196FF),\n                  ), // primaryAccent\n                ),\n                filled: true,\n                fillColor: const Color(0xFF151515), // base2\n                counterStyle: const TextStyle(\n                  fontFamily: 'Space Grotesk',\n                  fontSize: 12, // Subtext/S1-regular\n                  fontWeight: FontWeight.normal,\n                  color: Color(0xFFFFFFFF),\n                  height: 1.33, // 16px line height / 12px font size\n                  letterSpacing: 0,\n                ),\n              ),\n            ),\n            const SizedBox(height: 24),\n\n            // Audio waveform visualization\n            if (_isRecordingAudio) ...[\n              const Text(\n                'Recording Audio...',\n                style: TextStyle(\n                  fontFamily: 'Space Grotesk',\n                  fontSize: 20, // Heading/H3-bold\n                  fontWeight: FontWeight.bold,\n                  color: Color(0xFFFFFFFF),\n                  height: 1.3, // 26px line height / 20px font size\n                  letterSpacing: -0.2, // -1% of 20px\n                ),\n              ),\n              const SizedBox(height: 8),\n              _buildAudioWaveform(),\n              const SizedBox(height: 16),\n            ],\n\n            // Video preview\n            _buildVideoPreview(),\n\n            const SizedBox(height: 24),\n            const Text(\n              'Record your response (Optional)',\n              style: TextStyle(\n                fontFamily: 'Space Grotesk',\n                fontSize: 20, // Heading/H3-bold\n                fontWeight: FontWeight.bold,\n                color: Color(0xFFFFFFFF),\n                height: 1.3, // 26px line height / 20px font size\n                letterSpacing: -0.2, // -1% of 20px\n              ),\n            ),\n            const SizedBox(height: 16),\n            Row(\n              mainAxisAlignment: MainAxisAlignment.spaceEvenly,\n              children: [\n                // Audio recording button\n                if (_recordedAudioPath == null)\n                  Column(\n                    children: [\n                      FloatingActionButton(\n                        onPressed: _isRecordingAudio\n                            ? _stopAudioRecording\n                            : _startAudioRecording,\n                        backgroundColor: _isRecordingAudio\n                            ? const Color(0xFFC22743)\n                            : const Color(\n                                0xFF9196FF,\n                              ), // negative : primaryAccent\n                        child: Icon(\n                          _isRecordingAudio ? Icons.stop : Icons.mic,\n                          color: Colors.white,\n                        ),\n                      ),\n                      const SizedBox(height: 8),\n                      Text(\n                        _isRecordingAudio ? 'Stop' : 'Record Audio',\n                        style: const TextStyle(\n                          fontFamily: 'Space Grotesk',\n                          fontSize: 12, // Subtext/S1-regular\n                          fontWeight: FontWeight.normal,\n                          color: Color(0xFFFFFFFF),\n                          height: 1.33, // 16px line height / 12px font size\n                          letterSpacing: 0,\n                        ),\n                      ),\n                    ],\n                  )\n                else\n                  Column(\n                    children: [\n                      FloatingActionButton(\n                        onPressed: _deleteAudioRecording,\n                        backgroundColor: const Color(0xFFC22743), // negative\n                        child: const Icon(Icons.delete, color: Colors.white),\n                      ),\n                      const SizedBox(height: 8),\n                      const Text(\n                        'Delete Audio',\n                        style: TextStyle(\n                          fontFamily: 'Space Grotesk',\n                          fontSize: 12, // Subtext/S1-regular\n                          fontWeight: FontWeight.normal,\n                          color: Color(0xFFFFFFFF),\n                          height: 1.33, // 16px line height / 12px font size\n                          letterSpacing: 0,\n                        ),\n                      ),\n                    ],\n                  ),\n                // Video recording button\n                if (_recordedVideoPath == null)\n                  Column(\n                    children: [\n                      FloatingActionButton(\n                        onPressed: _isRecordingVideo\n                            ? _stopVideoRecording\n                            : _startVideoRecording,\n                        backgroundColor: _isRecordingVideo\n                            ? const Color(0xFFC22743)\n                            : const Color(\n                                0xFF5961FF,\n                              ), // negative : secondaryAccent\n                        child: Icon(\n                          _isRecordingVideo ? Icons.stop : Icons.videocam,\n                          color: Colors.white,\n                        ),\n                      ),\n                      const SizedBox(height: 8),\n                      Text(\n                        _isRecordingVideo ? 'Stop' : 'Record Video',\n                        style: const TextStyle(\n                          fontFamily: 'Space Grotesk',\n                          fontSize: 12, // Subtext/S1-regular\n                          fontWeight: FontWeight.normal,\n                          color: Color(0xFFFFFFFF),\n                          height: 1.33, // 16px line height / 12px font size\n                          letterSpacing: 0,\n                        ),\n                      ),\n                    ],\n                  )\n                else\n                  Column(\n                    children: [\n                      FloatingActionButton(\n                        onPressed: _deleteVideoRecording,\n                        backgroundColor: const Color(0xFFC22743), // negative\n                        child: const Icon(Icons.delete, color: Colors.white),\n                      ),\n                      const SizedBox(height: 8),\n                      const Text(\n                        'Delete Video',\n                        style: TextStyle(\n                          fontFamily: 'Space Grotesk',\n                          fontSize: 12, // Subtext/S1-regular\n                          fontWeight: FontWeight.normal,\n                          color: Color(0xFFFFFFFF),\n                          height: 1.33, // 16px line height / 12px font size\n                          letterSpacing: 0,\n                        ),\n                      ),\n                    ],\n                  ),\n              ],\n            ),\n            const Spacer(),\n            SizedBox(\n              width: double.infinity,\n              child: ElevatedButton(\n                onPressed: _submitQuestionnaire,\n                style: ElevatedButton.styleFrom(\n                  padding: const EdgeInsets.symmetric(vertical: 16),\n                  shape: RoundedRectangleBorder(\n                    borderRadius: BorderRadius.circular(12),\n                  ),\n                  backgroundColor: const Color(0xFF9196FF), // primaryAccent\n                ),\n                child: const Text(\n                  'Submit',\n                  style: TextStyle(\n                    fontFamily: 'Space Grotesk',\n                    fontSize: 16, // Body/B1-bold\n                    fontWeight: FontWeight.bold,\n                    color: Color(0xFFFFFFFF),\n                    height: 1.5, // 24px line height / 16px font size\n                    letterSpacing: 0,\n                  ),\n                ),\n              ),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n\n  @override\n  void dispose() {\n    _questionController.dispose();\n    _audioRecorder.closeRecorder();\n    _buttonAnimationController.dispose();\n    _waveformAnimationController.dispose();\n    super.dispose();\n  }\n}"
        }
    ]
}